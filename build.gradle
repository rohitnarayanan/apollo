/*
 * This file was generated by the Gradle "init" task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/5.0/userguide/java_library_plugin.html
 */
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath "io.spring.gradle:dependency-management-plugin:${springIOPluginVersion}"
    }
}

apply plugin: "io.spring.dependency-management"
apply plugin: "java-library"
apply plugin: "maven"
apply plugin: "eclipse"

repositories {
    jcenter()
	mavenLocal()
}

dependencyManagement {
    imports {
        mavenBom "io.spring.platform:platform-bom:${springPlatformVersion}"
    }
}

/*
 * Configuration
 */
def buildTimestamp = new Date().format("yyyyMMdd-hhmmss");


/*
 * Build Settings
 */
compileJava {
	sourceCompatibility = javaVersion
	targetCompatibility = javaVersion

    options.compilerArgs += ["-Xlint:unchecked"]
}

compileTestJava {
	sourceCompatibility = javaVersion
	targetCompatibility = javaVersion
}

jar {
	enabled = true
	from sourceSets.main.allSource
	manifest {
		attributes (
			"gradle-version": gradleVersion,
			"java-version": javaVersion,
			"spring-platform-version": springPlatformVersion,
			"build-version": version,
			"build-timestamp": buildTimestamp
		)
	}
}

build.finalizedBy install

// eclipse {
// 	jdt {
// 		sourceCompatibility = javaVersion
// 		targetCompatibility = javaVersion
// 		javaRuntimeName = "JavaSE-" + javaVersion
		
		
// 		file {
// 			withProperties { properties ->
// 				properties.put("org.eclipse.jdt.core.compiler.processAnnotations", "disabled")
// 				properties.put("org.eclipse.jdt.core.compiler.codegen.targetPlatform", javaVersion)
// 			}
// 		}
// 	}
// }

dependencies {
	/*
	 * compile dependencies
	 */
	api ("accelerate:accelerate-spring:${accelerateSpringVersion}")
	
	implementation ("org.springframework.boot:spring-boot-starter-aop")
	implementation ("org.springframework.boot:spring-boot-starter-web")
	implementation ("org.springframework.boot:spring-boot-starter-security")
	implementation ("org.springframework.boot:spring-boot-starter-actuator")
	
	implementation ("net.jthink:jaudiotagger:2.2.6-PATHRIK")
	implementation ("org.apache.commons:commons-lang3")
	
	runtimeOnly ("org.springframework.boot:spring-boot-starter-tomcat")
	runtimeOnly ("org.springframework.boot:spring-boot-devtools")
	runtimeOnly ("org.jolokia:jolokia-core")
	
	testImplementation ("org.springframework.boot:spring-boot-starter-test")
}
